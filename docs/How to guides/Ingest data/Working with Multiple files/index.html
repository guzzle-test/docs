<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Guzzle Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Guzzle Blog Atom Feed"><title data-react-helmet="true">Working with Multiple files | Guzzle</title><meta data-react-helmet="true" property="og:url" content="https://guzzle-test.github.io/docs/How to guides/Ingest data/Working with Multiple files"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Working with Multiple files | Guzzle"><meta data-react-helmet="true" name="description" content="This article outlines how to work with multiple files for source and target in Ingestion activity.  The Source section of Ingestion activity provides the property File Pattern  that allow user to specify the dynamic file name pattern using Glob expression language. More details on Glob expression can be found here"><meta data-react-helmet="true" property="og:description" content="This article outlines how to work with multiple files for source and target in Ingestion activity.  The Source section of Ingestion activity provides the property File Pattern  that allow user to specify the dynamic file name pattern using Glob expression language. More details on Glob expression can be found here"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://guzzle-test.github.io/docs/How to guides/Ingest data/Working with Multiple files"><link data-react-helmet="true" rel="alternate" href="https://guzzle-test.github.io/docs/How to guides/Ingest data/Working with Multiple files" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://guzzle-test.github.io/docs/How to guides/Ingest data/Working with Multiple files" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.ab43cd5c.css">
<link rel="preload" href="/assets/js/runtime~main.55329698.js" as="script">
<link rel="preload" href="/assets/js/main.bcc59244.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title"></strong></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/introduction to guzzle">Docs</a><a class="navbar__item navbar__link" href="/Api/api">API</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="searchWrapper_3rmH"></div><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/guzzle-logo.svg" alt="Guzzle" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/introduction to guzzle">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/Api/api">API</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/introduction to guzzle">Introduction to guzzle</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/Concepts/concepts">concepts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/Getting started/getting-started">getting-started</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">How to guides</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Administration</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Environment config</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Administration/Environment config/Repository database">Repository database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Administration/Environment config/Setup Shared Storage">Setup Shared Storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Administration/Environment config/Timeout and Sync">Timeout and Sync</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Maintenance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Administration/Maintenance/JWT">JWT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Administration/Maintenance/Schedule">Schedule</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Administration/Maintenance/View service log">View service log</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Administration/Security/Azure Single Sign On">Azure Single Sign On</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Administration/Security/User management">User management</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Author</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Author/Author">Author</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Author/External">External</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Author/Git Integration and Version Control">Git Integration and Version Control</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Author/Schedule">Schedule</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Computes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Computes/Azure Databricks">Azure Databricks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Computes/Local Spark">Local Spark</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Computes/Yarn">Yarn</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Datastores</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Datastores/Amazon S3">Amazon S3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Datastores/Azure Data Factory">Azure Data Factory</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Datastores/Azure Data Lake Storage Gen2">Azure Data Lake Storage Gen2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Datastores/Azure SQL">Azure SQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Datastores/Databricks File System">Databricks File System</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Datastores/Datastore overview">Datastore overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Datastores/Delta Lake">Delta Lake</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Datastores/HDFS">HDFS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Datastores/Hive">Hive</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Datastores/Server file system">Server file system</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Governance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Governance/Consraint Checks">Consraint Checks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Governance/Housekeeping Hive and Delta tables">Housekeeping Hive and Delta tables</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Governance/Reconcilation of data accross two tables">Reconcilation of data accross two tables</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Ingest data</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Column Restrictions - Exclude and Include Columns">Column Restrictions - Exclude and Include Columns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Configure Control File">Configure Control File</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Housekeeping">Housekeeping</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Ingest Data from Local file system to MySQL Database">Ingest Data from Local file system to MySQL Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Moving Processed Files">Moving Processed Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Pipeline">Pipeline</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Pre-SQL and Post-SQL for Source and Target in Ingestion">Pre-SQL and Post-SQL for Source and Target in Ingestion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Processing">Processing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Watermark">Watermark</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Working with Big Data">Working with Big Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Working with Databases- Azure SQL">Working with Databases- Azure SQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Working with Databases- Azure Synapse Analytics">Working with Databases- Azure Synapse Analytics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Working with Databases- HIVE">Working with Databases- HIVE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Working with Databases- JDBC">Working with Databases- JDBC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Working with Delimited Files">Working with Delimited Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Working with Excel">Working with Excel</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Working with Fixed Length Files">Working with Fixed Length Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Working with Hive and Delta">Working with Hive and Delta</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Working with JSON Files">Working with JSON Files</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/How to guides/Ingest data/Working with Multiple files">Working with Multiple files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Working with Text and Log Files">Working with Text and Log Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/How to guides/Ingest data/Working with XML files">Working with XML files</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Monitor</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/How to guides/Monitor/Monitor">Monitor</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Working with Multiple files</h1></header><div class="markdown"><p>This article outlines how to work with multiple files for source and target in Ingestion activity.  The Source section of Ingestion activity provides the property <strong>File Pattern</strong>  that allow user to specify the dynamic file name pattern using Glob expression language. More details on Glob expression can be found <a href="https://docs.oracle.com/javase/tutorial/essential/io/fileOps.html#glob" target="_blank" rel="noopener noreferrer">here</a> </p><p>For Target  section of Ingestion activity, Ingestion activity provides various settings to determine the how the files are copied over from source folder or table into the target section</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="support-for-file-pattern-in-source-section"></a>Support for File Pattern in Source Section<a class="hash-link" href="#support-for-file-pattern-in-source-section" title="Direct link to heading">#</a></h2><p>Ingestion activity allows specifying the initial (or root) path when defining the data store as explained. The <code>File Pattern</code> setting is treated as relative to the path  specified in the data store. Ingestion activity has the same treatment of File Pattern for all the types of. </p><p>Below describes different options of how <code>File Pattern</code> can be specified and its treatment by Ingestion activity</p><table><tr><td>Options</td><td>Example</td><td>Description</td></tr><tr><td>Static file path</td><td>csv/customer.csv</td><td>This will retrieve specific file from the file system</td></tr><tr><td>Recursive</td><td>customer/**/data*.csv</td><td>This will cause it to enumerate all the files recursively in the customer subfolder in the from the file system and file matching the patter data*.csv will be considered for processing</td></tr><tr><td>Dynamic folder and file path</td><td>cus*/**/customer customer_[0-9][0-9]/**/customer</td><td>Since the first component of file pattern contains wildcard or regular expression, this will result in enumeration of all the files in the root directory , of which it will pick those which match the file pattern is used to  recursively search the files within a given directory </td></tr><tr><td>Static folder name and dynamic sub-folder and file name</td><td><span>customer/asia/data_&lt;sg, hk, my&gt;/*.csv</span></td><td>Since the first two level of folders are statically specified (and does not contain wildcard or reg-exp), it will enumerate all the files in the sub-directory customer/asia and match the resultant files with the rest of file pattern</td></tr></table><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>For optimal performance and to utilize the service-side filter, it is recommended to provide static directory name where possible to reduce the amount of metadata (file listing) that Ingestion activity has to retrieve before applying filename pattern. This is crucial if the source file system contains large of number of files</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="using-file-data-store-in-target-or-reject-section"></a>Using File Data Store in Target or Reject section<a class="hash-link" href="#using-file-data-store-in-target-or-reject-section" title="Direct link to heading">#</a></h2><p>Ingestion activity provides following properties which determines how the files and folders are generated when using File datastore as target. </p><table><tr><td>Property</td><td>Description</td><td>Required</td></tr><tr><td>Path</td><td>This is the directory in which the target files and folder shall be created. This path is relative to the root path that is specified when defining the File datastore</td><td>Yes</td></tr><tr><td>Generate Single File</td><td>When set as true, this will generate a single file corresponding to each source file. Similarly for when the source is a table it will generate one file for entire table for non-partitioned table or one data file per each partition in the respective partition folder If the settings is set to false, it will create a folder for each source file or source table and generate multiple part files as an output in these folders. For partitioned table it will contain generate multiple part files within the partition folder</td><td>No  (default value: is false)</td></tr><tr><td>Preserve Hierarchy</td><td>When set to true, it will mirror the folder structure as per source folder structure inside the target directory specified as per File Path. The entire folder structure of source as per &quot;File Pattern&quot; is mirrored.</td><td>No  (default value: is false)</td></tr></table><p>Apat from the above properties, there are additional settings that are meant to specify File Format and its associated properties. This is covered in detail in section :</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Any existing file within the same folder and file name shall be overwritten </p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="illustration-of-how-file-based-source-are-copied-in-target"></a>Illustration of how file based source are copied in Target<a class="hash-link" href="#illustration-of-how-file-based-source-are-copied-in-target" title="Direct link to heading">#</a></h2><p>Assuming that source file pattern results below files:</p><p>customer/</p><p>   customer1.csv</p><p>   customer2.csv</p><p>the folders and files that shall be generated in the target folder path (which is root path in Data store + File path specified in target section) shall be as per below: </p><table><tr><td></td><td></td><td>Generate Single File</td><td></td></tr><tr><td></td><td></td><td>true</td><td>false</td></tr><tr><td>Preserve Hierarchy</td><td>true</td><td>customer/ customer1.csv customer2.csv</td><td>customer/ customer1.csv\ part_001.csv part_002.csv customer2.csv\ part_001.csv part_002.csv</td></tr><tr><td></td><td>false</td><td> customer1.csv.12321312213213 customer2.csv.12321312213214</td><td>customer1.csv.12321312213213 part_001.csv part_002.csv customer2.csv.12321312213214 part_001.csv part_002.csv</td></tr></table><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><ol><li>The suffix files or folder when peserver hierarchy is not selected is publish id that is generated </li><li>The part file are generated by spark and the naming convention will depend on implementation of Spark connector</li></ol></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="illustration-of-how-table-based-source-are-copied-in-target"></a>Illustration of how table based source are copied in target<a class="hash-link" href="#illustration-of-how-table-based-source-are-copied-in-target" title="Direct link to heading">#</a></h2><p>Assuming the source table <strong>customer </strong>is non partitioned, it shall generate the files as per below</p><table><tr><td></td><td></td><td>Generate Single File</td><td></td></tr><tr><td></td><td></td><td>true</td><td>false</td></tr><tr><td>Preserve Hierarchy</td><td>true or false</td><td>customer.csv</td><td>customer/ part_001.csv part_002.csv</td></tr></table><p>Considering the source table, the customer** <strong>is partitioned with two levels at </strong>region <strong>and </strong>country **level with below as sample set of partitions:</p><p>customer</p><p>  region=asia</p><p>  country=sg<br>
country=my</p><p>  region=europe</p><p>  country=fr</p><p>The target files and folder will following below structure as per different settings of </p><table><tr><td></td><td></td><td>Generate Single File</td><td></td></tr><tr><td></td><td></td><td>true</td><td>false</td></tr><tr><td>Preserve Hierarchy</td><td>true</td><td>customer/ region=asia/ country=sg/ customer.csv country=my/ customer.csv region=europe/ country=fr/ customer.csv</td><td>customer/ region=asia/ country=sg/ part_001.csv part_002.csv country=my/ part_001.csv part_002.csv region=europe/ country=fr/ part_001.csv part_002.csv</td></tr><tr><td></td><td>false</td><td>customer.csv</td><td>customer/ part_001.csv part_002.csv</td></tr></table><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The partitioned settings of the tales are taken from the table metadata (and not from Ingestion config)</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parallel-processing-of-files"></a>Parallel Processing of Files<a class="hash-link" href="#parallel-processing-of-files" title="Direct link to heading">#</a></h2><p>When ingesting data from multiple source files, Ingestion activity will read and process individual files in separate threads. It will spawn a fixed number of threads which will pick one file at a time once it&#x27;s done processing the previous file. Each of this thread will read the file, perform control total and schema validations and apply transformation before publishing it to target. </p><p>The number of threads that Ingestion activity spawns to process the files concurrently is determined by the parameter: <strong>guzzle.batchpipeline.threads </strong>which can be specified when running the activity or passed when calling the activity from <strong>Pipeline</strong></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="partial-load-setting-in-guzzle"></a>Partial Load setting in Guzzle<a class="hash-link" href="#partial-load-setting-in-guzzle" title="Direct link to heading">#</a></h2><p>When processing multiple source files, Ingestion Activity will process individual files in separate threads. It reads the files, performs control total and schema validations and applies transformation before publishing it to target. A subset of files can fail during this process due to one of the below reasons: :</p><ol><li><p>When the control total of the file does not match with the actual file content</p></li><li><p>If validations are specified the number of records failing the validation breaches the reject threshold set for a given file</p></li><li><p>The file becomes unavailable when Ingestion activity is trying to process it</p></li></ol><p><strong>Partial Load  </strong>setting in Source section determines whether Ingestion activity should write the data to Target if a subset of files have failed the validations. Below describes the behavior of this setting: . </p><table><tr><td>true</td><td>will proceed to write to the target datastore excluding the files which had failure. The activity will be marked with the status WARNING</td></tr><tr><td>false (default)</td><td>None of the data will be written to the to target datastore and job will be marked with status  FAILED</td></tr></table></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/ja-guzzle/docs/blob/master/docs/How to guides/Ingest data/Working with Multiple files.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/How to guides/Ingest data/Working with JSON Files"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Working with JSON Files</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/How to guides/Ingest data/Working with Text and Log Files"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Working with Text and Log Files Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#support-for-file-pattern-in-source-section" class="table-of-contents__link">Support for File Pattern in Source Section</a></li><li><a href="#using-file-data-store-in-target-or-reject-section" class="table-of-contents__link">Using File Data Store in Target or Reject section</a></li><li><a href="#illustration-of-how-file-based-source-are-copied-in-target" class="table-of-contents__link">Illustration of how file based source are copied in Target</a></li><li><a href="#illustration-of-how-table-based-source-are-copied-in-target" class="table-of-contents__link">Illustration of how table based source are copied in target</a></li><li><a href="#parallel-processing-of-files" class="table-of-contents__link">Parallel Processing of Files</a></li><li><a href="#partial-load-setting-in-guzzle" class="table-of-contents__link">Partial Load setting in Guzzle</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Guzzle, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.55329698.js"></script>
<script src="/assets/js/main.bcc59244.js"></script>
</body>
</html>